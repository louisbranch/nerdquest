// Generated by CoffeeScript 1.3.3
(function() {
  var config, mapMissions, nano;

  config = require('../config');

  nano = require('nano')(config.db.url);

  mapMissions = function(row) {
    return row.doc;
  };

  exports.getMissions = function(callback) {
    var missions;
    missions = nano.db.use('missions');
    return missions.list({
      include_docs: true
    }, function(err, body) {
      if (!err) {
        missions = body.rows.map(mapMissions);
        return callback(missions);
      }
    });
  };

  exports.saveMission = function(json, callback) {
    var missions;
    missions = nano.db.use('missions');
    return missions.insert(json, null, function(err, body) {
      if (!err) {
        return callback(body.id);
      }
    });
  };

}).call(this);
