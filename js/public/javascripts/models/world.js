// Generated by CoffeeScript 1.3.3
(function() {

  Nerd.World = Backbone.RelationalModel.extend({
    isRight: function(callback) {
      var clues, level;
      clues = this.get('world_clues');
      if (clues) {
        level = this.get('level');
        return this.get('quest').scoreRightWorld(level, callback);
      } else {
        this.get('quest').scoreWrongWorld();
        return callback('Wrong world', null);
      }
    }
  });

  Nerd.Worlds = Backbone.Collection.extend({
    model: Nerd.World,
    worldsByLevel: function(lvl) {
      return _.select(this.models, function(world) {
        return world.get('level') === lvl;
      });
    },
    firstWorld: function() {
      return this.worldsByLevel(0)[0];
    },
    start: function(callback) {
      var firstWorld, nextWorlds;
      firstWorld = this.firstWorld();
      nextWorlds = this.worldsByLevel(1);
      return callback({
        firstWorld: firstWorld,
        nextWorlds: nextWorlds
      });
    }
  });

}).call(this);
